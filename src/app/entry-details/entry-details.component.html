<main class="main-scrollbar">

    <div class="screens_header position-fixed bg-theme1 h-70px zi-9 d-flex align-items-center w-100">
      <div class="container">
        <div class="row align-items-center position-relative position-relative zi-2">
          <!-- <div class="col-auto position-absolute start-0">
            <a href="javascript:;"><img class="w-32px" src="assets/img/back-btn.svg" alt="" (click)="rout()"></a>
          </div> -->
          <div class="col text-center">
            <h2 class="text-white fw-600 fs-18 mb-0">Entry Details</h2>
          </div>
        </div>
      </div>
    </div>
    <div class="screens_scroll_part pt-5">
      <div class="container pt-5">
        <div class="row pt-2">
          <div class="col-12">
            <div class="row clock_in_box position-relative">
              <!-- Date -->
              <div class="col mb-2">
                <!-- <strong *ngIf="!editDateMode" class="text-theme2 fs-18">{{entryDetails?.start_time | date:'EE MMM d'}}</strong> -->
                <span>Date</span>
                <input type="date" autocomplete="off" class="px-4 text-theme2 form-control fs-18 border-0"
                      (focusout)="handleDateChange($event)" [value]="entryDetails?.start_Date">
              </div>
              
              <!-- Site Address -->
              <div class="pb-2">
                <!-- <img class="col-1"  src="assets/img/pin.svg" alt="">  -->
                <span>Address</span>
                <input ngx-google-places-autocomplete [options]="placesOptions" (onAddressChange)="handleAddressChange($event)" type="text" class="col form-control text-black shadow-none px-4"
                placeholder="Enter Address" [value]="entryDetails?.site_address">
              </div>
              
              <div class="col-6 my-4">
                <span>Start</span>
                <div class="bg-light p-3 rounded-8 border border-2 text-center">
                  <div class="fw-500 fs-24 d-block"> {{  entryDetails?.start_time | date:'mediumTime'}} </div>
                </div>
              </div>
              <div class="col-6 my-4">
                <span>Stop</span>
                <div class="bg-light p-3 rounded-8 border border-2 text-center">
                  <div class="fw-500 fs-24 d-block">{{ entryDetails?.end_time | date:'mediumTime'}} </div>
                </div>
              </div>
             
            </div>
          </div>
          <div class="col-12" >
            <div *ngIf="entryDetails?.tasks.length">
              Task Summary
            </div>
            <div *ngIf="entryDetails?.tasks.length" class="rounded-10 border border-2 bg-light p-3 py-1">
              <div *ngFor="let task of entryDetails?.tasks; let i = index; let isFirst = first; let isLast = last" class="py-2" [class.border-bottom]="!isLast">
                <div>
                  <div class="row">
                      <div class="col-9">{{task.tradeCategory}}  </div>
                    <div *ngIf="!isFirst" class="col-3 text-end">
                      <!-- <span class="btn-link mx-2" role="button" title="Edit" data-bs-toggle="modal" data-bs-target="#editModal"><app-icon-edit></app-icon-edit></span>  -->
                      <span class="btn-link" role="button" title="Remove" (click)="removeTask(i)"><app-icon-minus></app-icon-minus></span>
                      <!-- <button type="button" role="button" class="btn-close fs-14 text-theme2 fw-600" title="Remove" aria-label="Remove"></button> -->
                    </div>
                    
                  </div>
               
                  <div class="row">
                    <div class="col-9">{{task.taskDescription}}</div>
                    <div class="col-3 text-end fs-20 fw-semi-bold ">
                      <div>{{task.taskTime}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

             <!-- Add Task -->
             <div class="form-group position-relative row justify-content-end my-2">
              <div class="col-auto">
                
                <button class="btn btn-md d-inline-flex w-auto" data-bs-toggle="modal" data-bs-target="#taskModal">
                  <span class="btn-link" role="button" title="Add Task"><app-icon-plus></app-icon-plus> ADD TASK</span> 
                </button>
                </div>
              </div>

             <!-- Total working hrs -->
             <div class="col-12 mb-4">
              <div class="bg-light p-3 rounded-8 border border-2 text-center">
                <div class="row">
                  <div class="fw-500 fs-24 d-block col text-start">Total</div>
                  <div class="col text-end">
                    <span class="fw-500 fs-24 d-block">{{totalTaskTime}}</span>
                  </div>
                </div>
              </div>
            </div>
  
            <!-- Unallocated Time -->
  
            <!-- <div>
              Unallocated Time 
              <div class="bg-light p-3 rounded-8 border border-2">
                <span class="fw-500 fs-24 d-block text-danger text-end">00:20</span>
              </div>
            </div> -->

            <!-- // Add Task -->

            <div class="row justify-content-end">
              <button (click)="timesheet()"
               class="col-6 btn rounded-8 fs-16 text-end px-3"><img src="assets/img/timesheet.svg"
               alt=""> Timesheets</button>
            </div>

            <div class="mb-4 row gap-3 p-3 justify-content-between">
              
               <button (click)="deleteEntry()"
               class="col btn btn-danger rounded-8 fs-16">Delete</button>
              <button (click)="share()"
               class="col button_screens rounded-8 fs-16">Share</button>
            </div>
            <!-- // Add Task -->
            <!-- <form class="" action="" [formGroup]="clockOutForm">
              <div class="form-group position-relative text-center my-5 py-4">
                <div class="row mx-0">
                  <div class="col-6">
                    <a href="javascript:;" data-bs-toggle="modal" data-bs-target="#exampleModal1"
                      class="button_screens rounded-8 fs-16"(click)="patchMessage()"><img src="assets/img/edit.svg" alt="">Edit</a>
                  </div>
                  <div class="col-6">
                    <button type="button"  (click)="confirmTime()"
                      class="button_screens rounded-8 fs-16"><img src="assets/img/tick.svg" alt="">Save</button>
                  </div>
                </div>
              </div>
            </form> -->
          </div>
        </div>
      </div>
    </div>
    <div class="screens_footer">
      <div class="container">
        <div class="row mx-0 align-items-center">
          <div class="col text-center">
            <a class="footer_mennus position-relative" (click)="index()"style="cursor: pointer"><img src="assets/img/home.svg" alt=""></a>
          </div>
          <div class="col text-center">
            <a class="footer_mennus position-relative" (click)="profile()"style="cursor: pointer"><img src="assets/img/user.svg" alt=""></a>
          </div>
          <div class="col text-center middle_menus">
            <a class="footer_mennus position-relative active_menu" (click)="clock()"style="cursor: pointer"><img class="bg-white rounded-pill"
                src="assets/img/active_clock.svg" alt=""></a>
          </div>
          <div class="col text-center">
            <a class="footer_mennus position-relative" (click)="timesheet()"style="cursor: pointer"><img src="assets/img/timesheet.svg"
                alt=""></a>
          </div>
          <div class="col text-center">
            <a class="footer_mennus position-relative" (click)="blankpage()" style="cursor: pointer"><img
                src="assets/img/settings.svg" alt=""></a>
          </div>
        </div>
      </div>
    </div>
  
  </main>


  <!-- ADD TASK MODAL  -->
  <div class="modal fade" id="taskModal" tabindex="-1" aria-labelledby="taskModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rounded-10">
        <div class="modal-header text-center position-relative py-4">
          <!-- <h5 class="modal-title text-center fs-18 fw-bold text-theme2 w-100" id="editModalLabel">Task</h5> -->
          <button type="button" class="btn-close fs-14 text-theme2 fw-600 position-absolute start-10px"
            data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body py-0">
          <div class="row">
            <div class="col-12">
              <!-- Add Task -->
            <div class="col-12 my-4 ">
              <div class="bg-white rounded-10 border border-1">
                <div class="row mx-0">
                  <div class="col-12 py-4 border-bottom">
                    <span class="text-theme2 fs-20 fw-500">Add Task</span>
                  </div>
                  <form class="py-4" [formGroup]="addTaskForm">
  
                    <div class="form-group row position-relative text-start mb-3">
                      <label class="fw-600 fs-16  mb-1"> Trade Category
                      <select class="form-control shadow-none mt-2 px-3 col-12" formControlName="tradeCategory" name="tradeCagtegory"
                        id="tradeCategory" required>
                          <option value="i" value="0">Please Select</option>
                          <option *ngFor="let trade of tradeCategories; let i=index" value="{{trade.tradeName}}">{{trade.tradeName}}</option>
                      </select>
                      </label>
                    </div>
  
                    <div class="form-group position-relative text-start mb-3">
                      <label class="fw-600 fs-16 mb-1" for="">Description</label>
                      <textarea class="form-control shadow-none fs-18" formControlName="taskDescription" name="taskDescription"
                        id="taskDescription"></textarea>
                    </div>
  
                    <div class="form-group position-relative text-start mb-3">
                      <label class="row fw-600 fs-16 mb-1" for="">
                        <span class="col-9 text-start">Time</span>
                        <span class="col-3 text-end text-black-50">h:mm:ss</span>
                       </label>
                      <input class="form-control shadow-none p-2 fs-26 text-end" formControlName="taskTime" name="taskTime"
                        id="taskTime"/>
                    </div>
  
                    <div class="form-group position-relative mt-2 row justify-content-end pt-4">
                      <div class="col-auto">
                          <button (click)="addtask()" data-bs-dismiss="modal"  class="btn btn-md btn-outline-primary d-inline-flex w-auto">Add Task</button>
                        </div>
                      </div>
                  </form>
                </div>
              </div>
            </div>

              
            </div> 
          </div>
        </div>
      </div>
    </div>
  </div>
  

  