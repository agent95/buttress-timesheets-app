<main class="main-scrollbar">

  <div class="screens_header position-fixed bg-theme1 h-70px zi-9 d-flex align-items-center w-100">
    <div class="container">
      <div class="row align-items-center position-relative position-relative zi-2">
        <div class="col-auto position-absolute start-0">
          <a href="javascript:;"><img class="w-32px" src="assets/img/back-btn.svg" alt="" (click)="rout()"></a>
        </div>
        <div class="col text-center">
          <h2 class="text-white fw-600 fs-18 mb-0">Site Address</h2>
        </div>
      </div>
    </div>
  </div>
  <div class="screens_scroll_part py-5">
    <div class="map_box">
      <agm-map [latitude]='lat' [longitude]='long' [zoom]='zoom'>

        <!-- // current location -->
        <agm-marker *ngIf="currentLocation" [latitude]="currentLocation.lat" [longitude]="currentLocation.lng"></agm-marker>

        <!-- // current sites -->
        <agm-marker *ngFor="let marker of valu" [latitude]="marker.lat" [longitude]="marker.long"
          [markerClickable]="true" (markerClick)="fillAddress(marker)">
          <agm-info-window #infoWindow>
            {{ marker.site_address }}
          </agm-info-window>
        </agm-marker>

      </agm-map>
    </div>
    <div class="container pt-3">
      <div class="row">
        <div class="col-12 text-center mb-4">
          <form class="" action="" [formGroup]="clockDataForm">
            <div class="form-group position-relative text-start mb-3">
              <!-- <input type="text" id="address" name="address" formControlName="location1"
                class="form-control shadow-none px-4" placeholder="Choose your location from the map" readonly> -->
                <!-- <label>Site Address</label> -->
                <a *ngIf="currentLocation" href="#" (click)="$event.preventDefault(); setCurrentAddress()">Use My Current Location</a>
            </div>
            <div class="form-group position-relative text-start">
              <input ngx-google-places-autocomplete [options]="placesOptions" (onAddressChange)="handleAddressChange($event)" type="email" id="mail" name="mail" formControlName="address" class="form-control shadow-none px-4"
                placeholder="Enter Address" #A>
            </div>
            <!--
            <div class="form-group text-center position-relative text-start my-3">
              <span class="fs-16 text-muted fw-600">OR</span>
            </div>
             <div class="row justify-content-between">
              <div class="col-12">
                <div class="form-group position-relative text-start mb-3">
                  <input type="text" id="address" name="address" formControlName="enterCode"
                    class="form-control shadow-none px-4" placeholder="Enter Code" #C>
                </div>
              </div>
              <div class="col-6">
                <div class="form-group position-relative text-start mb-3" data-bs-toggle="modal"
                  data-bs-target="#exampleModal6">
                  <button type="button" *ngIf="!scan" (click)="scan = true" capture="environment"
                    class="button_screens rounded-10 fs-15">Scan QR
                    Code</button>
                </div>
                <div class="modal fade" id="exampleModal6" tabindex="-1" aria-labelledby="exampleModalLabel"
                  aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content rounded-20">
                      <div class="modal-header text-center position-relative py-4">
                        <button type="button" class="btn-close fs-14 text-theme2 fw-600 position-absolute start-10px"
                          data-bs-dismiss="modal" aria-label="Close" (click)="scan = false"></button>
                      </div>
                      <div class="modal-body py-0">

                        <div class="scanner-shell" *ngIf="scan">
                          <zxing-scanner #scanner start="true" [device]="currentDevice"
                            (scanSuccess)="handleQrCodeResult($event)" [formats]="allowedFormats"></zxing-scanner>

                          <section class="results">
                            <small>Result</small>
                            <strong>{{ qrResultString}}</strong>
                          </section>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
              

            </div> -->
          </form>
        </div>

        <div class="col-12 my-5">
          <a class="start_timer" (click)="check()" style="cursor: pointer">
            <div><img src="assets/img/timer.svg" alt="">
              <strong class="d-flex align-items-center text-theme1 mt-2 fs-14" style="cursor: pointer">Start Timer</strong>
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>

  
  <app-footer activeTab="clock"></app-footer>

</main>
<dialog id="exampleModal12" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-20">
      <div class="modal-header text-center position-relative py-4">
        <h5 class="modal-title text-center fs-18 fw-bold text-theme2 w-100" id="exampleModalLabel">Site Induction</h5>
        <button type="button" class="btn-close fs-14 text-theme2 fw-600 position-absolute start-10px"
          (click)="closemodal1()" aria-label="Close"></button>
      </div>
      <div class="modal-body py-0">
        <div class="row">
          <div class="col-12 px-0 site_induction">
            <form class="row" action="">
              <div class="form-group position-relative text-start px-2" *ngFor="let item of newarr;">

                <span
                  class="form-control bg-white shadow-none px-4 fs-15 border-bottom border-1 rounded-4 h-60px d-flex align-items-center"
                  *ngIf="item != ''">{{item}}</span>
              </div>

            </form>
          </div>
        </div>
      </div>
      <div class="modal-footer border-0 py-3 mt-4">
        <div class="row mx-0 w-100 justify-content-end">
          <div class="col-5">
            <a class="button_screens rounded-8 fs-15" (click)="sendData()"style="cursor: pointer">Skip</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</dialog>
<dialog id="exampleModal13" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-20">
      <div class="modal-header text-center position-relative py-4">
        <h5 class="modal-title text-center fs-18 fw-bold text-theme2 w-100" id="exampleModalLabel">Safety Briefing</h5>
        <button type="button" class="btn-close fs-14 text-theme2 fw-600 position-absolute start-10px"
          (click)="closemodal2()" aria-label="Close"></button>
      </div>
      <div class="modal-body py-0">
        <div class="row">
          <div class="col-12 px-0 site_induction">
            <form class="row" action="">
              <div class="form-group position-relative text-start px-2" *ngFor="let item of newarr2;">

                <span
                  class="form-control bg-white shadow-none px-4 fs-15 border-bottom border-1 rounded-4 h-60px d-flex align-items-center"
                  *ngIf="item != ''">{{item}}</span>
              </div>

            </form>
          </div>
        </div>
      </div>
      <div class="modal-footer border-0 py-3 mt-4">
        <div class="row mx-0 w-100 justify-content-end">
          <div class="col-5">
            <a class="button_screens rounded-8 fs-15" (click)="nextSkip()"style="cursor: pointer">Skip</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</dialog>


<div class="modal fade" id="scanPopup" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content rounded-20">
      <img *ngIf="scanImage" src="scanImage">
    </div>
  </div>
</div>